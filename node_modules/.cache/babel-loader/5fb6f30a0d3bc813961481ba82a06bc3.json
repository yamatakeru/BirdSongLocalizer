{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\yamat\\\\Workspace\\\\hark_bird_app\\\\src\\\\components\\\\Main.js\";\nimport React, { useState, useEffect, useContext } from 'react';\nimport Konva from 'konva';\nimport useImage from 'use-image';\nimport { Stage, Layer, Star, Text, Image } from 'react-konva';\nimport request from \"superagent\";\nimport { UserCount } from '../App';\nimport Reset from './Reset';\n\nconst URLImage = props => {\n  const [image] = useImage(props.url);\n  return /*#__PURE__*/React.createElement(Image, {\n    image: image,\n    scaleX: props.scaleX,\n    scaleY: props.scaleY,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 12,\n      columnNumber: 10\n    }\n  });\n};\n\nconst Main = () => {\n  const [count, setCount] = useContext(UserCount);\n  const [url, setUrl] = useState(\"\");\n  const [image, setImage] = useState(null);\n  useEffect(() => {\n    getUrl();\n    setImage(useImage(url));\n  }, []);\n\n  const getUrl = () => {\n    request.get(\"/api/getData\").end((err, data) => {\n      if (err) {\n        console.error(err);\n        return;\n      }\n\n      setUrl(data.body.url);\n      return;\n    });\n  };\n\n  const sendData = () => {\n    request.get(\"/api/sendData\").query({\n      data: -999\n    }).end((err, data) => {\n      if (err) {\n        console.error(err);\n        return;\n      }\n\n      console.log(data.body);\n    });\n  };\n\n  const handleDragStart = e => {\n    e.target.setAttrs({\n      shadowOffset: {\n        x: 15,\n        y: 15\n      },\n      scaleX: 1.1,\n      scaleY: 1.1\n    });\n  };\n\n  const handleDragEnd = e => {\n    e.target.to({\n      duration: 0.5,\n      easing: Konva.Easings.ElasticEaseOut,\n      scaleX: 1,\n      scaleY: 1,\n      shadowOffsetX: 5,\n      shadowOffsetY: 5\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"Main\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => setCount(count + 1),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }\n  }, \"Click me\"), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => setCount(count - 1),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }\n  }, \"Click me\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"Stage1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 9\n    }\n  }, \" Stage1 \"), /*#__PURE__*/React.createElement(Stage, {\n    width: window.innerWidth,\n    height: window.innerHeight / 3,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Layer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Image, {\n    image: image,\n    scaleX: 5,\n    scaleY: 5,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Text, {\n    text: \"Try to drag a star\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 11\n    }\n  }), [...Array(10)].map((_, i) => /*#__PURE__*/React.createElement(Star, {\n    key: i,\n    x: Math.random() * window.innerWidth,\n    y: Math.random() * window.innerHeight / 3,\n    numPoints: 5,\n    innerRadius: 20,\n    outerRadius: 40,\n    fill: \"#89b717\",\n    opacity: 0.8,\n    draggable: true,\n    rotation: Math.random() * 180,\n    shadowColor: \"black\",\n    shadowBlur: 10,\n    shadowOpacity: 0.6,\n    onDragStart: e => handleDragStart(e),\n    onDragEnd: e => handleDragEnd(e),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 13\n    }\n  }))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"Stage2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 9\n    }\n  }, \" Stage2 \")));\n};\n\nexport default Main;","map":{"version":3,"sources":["C:/Users/yamat/Workspace/hark_bird_app/src/components/Main.js"],"names":["React","useState","useEffect","useContext","Konva","useImage","Stage","Layer","Star","Text","Image","request","UserCount","Reset","URLImage","props","image","url","scaleX","scaleY","Main","count","setCount","setUrl","setImage","getUrl","get","end","err","data","console","error","body","sendData","query","log","handleDragStart","e","target","setAttrs","shadowOffset","x","y","handleDragEnd","to","duration","easing","Easings","ElasticEaseOut","shadowOffsetX","shadowOffsetY","window","innerWidth","innerHeight","Array","map","_","i","Math","random"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useContext } from 'react'\r\nimport Konva from 'konva';\r\nimport useImage from 'use-image';\r\nimport { Stage, Layer, Star, Text, Image } from 'react-konva';\r\nimport request from \"superagent\";\r\nimport { UserCount } from '../App';\r\nimport Reset from './Reset';\r\n\r\n\r\nconst URLImage = (props) => {\r\n  const [image] = useImage(props.url);\r\n  return <Image\r\n    image={image}\r\n    scaleX={props.scaleX}\r\n    scaleY={props.scaleY}\r\n  />;\r\n};\r\n\r\nconst Main = () => {\r\n  const [count, setCount] = useContext(UserCount);\r\n  const [url, setUrl] = useState(\"\");\r\n  const [image, setImage] = useState(null);\r\n\r\n  useEffect(() => {\r\n    getUrl();\r\n    setImage(useImage(url));\r\n  }, []);\r\n\r\n  const getUrl = () => {\r\n    request\r\n      .get(\"/api/getData\")\r\n      .end((err, data) => {\r\n        if (err) {\r\n          console.error(err);\r\n          return;\r\n        }\r\n          setUrl(data.body.url);\r\n          return;\r\n      });\r\n  };\r\n\r\n  const sendData = () => {\r\n    request\r\n    .get(\"/api/sendData\")\r\n    .query({data: -999})\r\n    .end((err, data) => {\r\n      if (err) {\r\n        console.error(err);\r\n        return;\r\n      }\r\n        console.log(data.body);\r\n    });\r\n  };\r\n\r\n  const handleDragStart = e => {\r\n    e.target.setAttrs({\r\n      shadowOffset: {\r\n        x: 15,\r\n        y: 15\r\n      },\r\n      scaleX: 1.1,\r\n      scaleY: 1.1\r\n    });\r\n  };\r\n\r\n  const handleDragEnd = e => {\r\n    e.target.to({\r\n      duration: 0.5,\r\n      easing: Konva.Easings.ElasticEaseOut,\r\n      scaleX: 1,\r\n      scaleY: 1,\r\n      shadowOffsetX: 5,\r\n      shadowOffsetY: 5\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div className=\"Main\">\r\n      <div className=\"\">\r\n      <button onClick={() => setCount(count + 1)}>\r\n          Click me\r\n      </button>\r\n      <button onClick={() => setCount(count - 1)}>\r\n          Click me\r\n      </button>\r\n      </div>\r\n      <div className=\"Stage1\">\r\n        <p> Stage1 </p>\r\n        <Stage width={window.innerWidth} height={window.innerHeight/3}>\r\n        <Layer>\r\n          <Image\r\n            image={image}\r\n            scaleX={5}\r\n            scaleY={5}\r\n          />\r\n          <Text text=\"Try to drag a star\" />\r\n          {[...Array(10)].map((_, i) => (\r\n            <Star\r\n              key={i}\r\n              x={Math.random() * window.innerWidth}\r\n              y={Math.random() * window.innerHeight/3}\r\n              numPoints={5}\r\n              innerRadius={20}\r\n              outerRadius={40}\r\n              fill=\"#89b717\"\r\n              opacity={0.8}\r\n              draggable\r\n              rotation={Math.random() * 180}\r\n              shadowColor=\"black\"\r\n              shadowBlur={10}\r\n              shadowOpacity={0.6}\r\n              onDragStart={e => handleDragStart(e)}\r\n              onDragEnd={e => handleDragEnd(e)}\r\n            />\r\n          ))}\r\n        </Layer>\r\n      </Stage>\r\n      </div>\r\n      <div className=\"Stage2\">\r\n        <p> Stage2 </p>\r\n        \r\n      </div>\r\n      \r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Main;\r\n"]},"metadata":{},"sourceType":"module"}