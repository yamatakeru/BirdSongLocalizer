{"ast":null,"code":"import _slicedToArray from\"C:\\\\Users\\\\yamat\\\\Workspace\\\\hark_bird_app\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useContext}from'react';import Konva from'konva';import useImage from'use-image';import{Stage,Layer,Star,Rect,Text,Image}from'react-konva';import request from\"superagent\";import{UserCount}from'../App';import Reset from'./Reset';var URLImage=function URLImage(props){var _useImage=useImage(props.url),_useImage2=_slicedToArray(_useImage,1),image=_useImage2[0];console.log(image);return/*#__PURE__*/React.createElement(Image,{image:image,scaleX:props.scaleX,scaleY:props.scaleY});};var Main=function Main(){var _useContext=useContext(UserCount),_useContext2=_slicedToArray(_useContext,2),count=_useContext2[0],setCount=_useContext2[1];var _useState=useState({}),_useState2=_slicedToArray(_useState,2),specgram_data=_useState2[0],setSpecgramData=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),data_ia_loaded=_useState4[0],setDataIsLoaded=_useState4[1];var getData=function getData(){request.get(\"/api/getSpectrumImg\").end(function(err,data){if(err){console.error(err);return;}setSpecgramData(data.body);console.log(specgram_data);setDataIsLoaded(true);return;});};var sendData=function sendData(){request.get(\"/api/sendData\").query({data:-999}).end(function(err,data){if(err){console.error(err);return;}console.log(data.body);});};var stage_area=function stage_area(){if(data_ia_loaded){return/*#__PURE__*/React.createElement(\"div\",{className:\"Stage1\"},/*#__PURE__*/React.createElement(\"p\",null,\" Stage1 \"),/*#__PURE__*/React.createElement(Stage,{width:window.innerWidth,height:window.innerHeight/3},/*#__PURE__*/React.createElement(Layer,null,/*#__PURE__*/React.createElement(URLImage,{url:specgram_data[\"img_path\"],scaleX:1,scaleY:1}),/*#__PURE__*/React.createElement(Text,{text:\"Try to drag a star\"}))));}else{return/*#__PURE__*/React.createElement(\"p\",null,\" Please date load. \");}};return/*#__PURE__*/React.createElement(\"div\",{className:\"Main\"},/*#__PURE__*/React.createElement(\"div\",{className:\"\"},/*#__PURE__*/React.createElement(\"button\",{onClick:function onClick(){return getData();}},\"Get data\"),/*#__PURE__*/React.createElement(\"button\",{onClick:function onClick(){return setCount(count-1);}},\"Click me\")),stage_area());};export default Main;","map":{"version":3,"sources":["C:/Users/yamat/Workspace/hark_bird_app/src/components/Main.js"],"names":["React","useState","useEffect","useContext","Konva","useImage","Stage","Layer","Star","Rect","Text","Image","request","UserCount","Reset","URLImage","props","url","image","console","log","scaleX","scaleY","Main","count","setCount","specgram_data","setSpecgramData","data_ia_loaded","setDataIsLoaded","getData","get","end","err","data","error","body","sendData","query","stage_area","window","innerWidth","innerHeight"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useContext } from 'react'\r\nimport Konva from 'konva';\r\nimport useImage from 'use-image';\r\nimport { Stage, Layer, Star, Rect, Text, Image } from 'react-konva';\r\nimport request from \"superagent\";\r\nimport { UserCount } from '../App';\r\nimport Reset from './Reset';\r\n\r\n\r\nconst URLImage = (props) => {\r\n  const [image] = useImage(props.url);\r\n  console.log(image);\r\n  return <Image\r\n    image={image}\r\n    scaleX={props.scaleX}\r\n    scaleY={props.scaleY}\r\n  />;\r\n};\r\n\r\nconst Main = () => {\r\n  const [count, setCount] = useContext(UserCount);\r\n  const [specgram_data, setSpecgramData] = useState({});\r\n  const [data_ia_loaded, setDataIsLoaded] = useState(false);\r\n\r\n  const getData = () => {\r\n    request\r\n      .get(\"/api/getSpectrumImg\")\r\n      .end((err, data) => {\r\n        if (err) {\r\n          console.error(err);\r\n          return;\r\n        }\r\n          setSpecgramData(data.body);\r\n          console.log(specgram_data);\r\n          setDataIsLoaded(true);\r\n          return;\r\n      });\r\n  };\r\n\r\n  const sendData = () => {\r\n    request\r\n    .get(\"/api/sendData\")\r\n    .query({data: -999})\r\n    .end((err, data) => {\r\n      if (err) {\r\n        console.error(err);\r\n        return;\r\n      }\r\n        console.log(data.body);\r\n    });\r\n  };\r\n\r\n  const stage_area = () => {\r\n    if (data_ia_loaded) {\r\n      return (\r\n        <div className=\"Stage1\">\r\n          <p> Stage1 </p>\r\n          <Stage width={window.innerWidth} height={window.innerHeight/3}>\r\n            <Layer>\r\n              <URLImage\r\n                url={specgram_data[\"img_path\"]}\r\n                scaleX={1}\r\n                scaleY={1}\r\n              />\r\n              <Text text=\"Try to drag a star\" />\r\n            </Layer>\r\n          </Stage>\r\n        </div>\r\n      );\r\n    } else {\r\n      return <p> Please date load. </p>;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"Main\">\r\n      <div className=\"\">\r\n      <button onClick={() => getData()}>\r\n          Get data\r\n      </button>\r\n      <button onClick={() => setCount(count - 1)}>\r\n          Click me\r\n      </button>\r\n      </div>\r\n      {stage_area()}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Main;\r\n"]},"metadata":{},"sourceType":"module"}