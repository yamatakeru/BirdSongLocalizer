{"ast":null,"code":"import _toConsumableArray from\"C:\\\\Users\\\\yamat\\\\Workspace\\\\hark_bird_app\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"C:\\\\Users\\\\yamat\\\\Workspace\\\\hark_bird_app\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useContext}from'react';import Konva from'konva';import useImage from'use-image';import{Stage,Layer,Star,Text,Image}from'react-konva';import request from\"superagent\";import{UserCount}from'../App';import Reset from'./Reset';var URLImage=function URLImage(props){var _useImage=useImage(props.url),_useImage2=_slicedToArray(_useImage,1),image=_useImage2[0];return/*#__PURE__*/React.createElement(Image,{image:image,scaleX:props.scaleX,scaleY:props.scaleY});};var Main=function Main(){var _useContext=useContext(UserCount),_useContext2=_slicedToArray(_useContext,2),count=_useContext2[0],setCount=_useContext2[1];var _useState=useState(null),_useState2=_slicedToArray(_useState,2),url=_useState2[0],setUrl=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),image=_useState4[0],setImage=_useState4[1];useEffect(function(){getUrl();setImage(useImage(url));},[]);var getUrl=function getUrl(){request.get(\"/api/getData\").end(function(err,data){if(err){console.error(err);return;}setUrl(data.body.url);return;});};var sendData=function sendData(){request.get(\"/api/sendData\").query({data:-999}).end(function(err,data){if(err){console.error(err);return;}console.log(data.body);});};var handleDragStart=function handleDragStart(e){e.target.setAttrs({shadowOffset:{x:15,y:15},scaleX:1.1,scaleY:1.1});};var handleDragEnd=function handleDragEnd(e){e.target.to({duration:0.5,easing:Konva.Easings.ElasticEaseOut,scaleX:1,scaleY:1,shadowOffsetX:5,shadowOffsetY:5});};return/*#__PURE__*/React.createElement(\"div\",{className:\"Main\"},/*#__PURE__*/React.createElement(\"div\",{className:\"\"},/*#__PURE__*/React.createElement(\"button\",{onClick:function onClick(){return setCount(count+1);}},\"Click me\"),/*#__PURE__*/React.createElement(\"button\",{onClick:function onClick(){return setCount(count-1);}},\"Click me\")),/*#__PURE__*/React.createElement(\"div\",{className:\"Stage1\"},/*#__PURE__*/React.createElement(\"p\",null,\" Stage1 \"),/*#__PURE__*/React.createElement(Stage,{width:window.innerWidth,height:window.innerHeight/3},/*#__PURE__*/React.createElement(Layer,null,/*#__PURE__*/React.createElement(Image,{image:image,scaleX:5,scaleY:5}),/*#__PURE__*/React.createElement(Text,{text:\"Try to drag a star\"}),_toConsumableArray(Array(10)).map(function(_,i){return/*#__PURE__*/React.createElement(Star,{key:i,x:Math.random()*window.innerWidth,y:Math.random()*window.innerHeight/3,numPoints:5,innerRadius:20,outerRadius:40,fill:\"#89b717\",opacity:0.8,draggable:true,rotation:Math.random()*180,shadowColor:\"black\",shadowBlur:10,shadowOpacity:0.6,onDragStart:function onDragStart(e){return handleDragStart(e);},onDragEnd:function onDragEnd(e){return handleDragEnd(e);}});})))),/*#__PURE__*/React.createElement(\"div\",{className:\"Stage2\"},/*#__PURE__*/React.createElement(\"p\",null,\" Stage2 \")));};export default Main;","map":{"version":3,"sources":["C:/Users/yamat/Workspace/hark_bird_app/src/components/Main.js"],"names":["React","useState","useEffect","useContext","Konva","useImage","Stage","Layer","Star","Text","Image","request","UserCount","Reset","URLImage","props","url","image","scaleX","scaleY","Main","count","setCount","setUrl","setImage","getUrl","get","end","err","data","console","error","body","sendData","query","log","handleDragStart","e","target","setAttrs","shadowOffset","x","y","handleDragEnd","to","duration","easing","Easings","ElasticEaseOut","shadowOffsetX","shadowOffsetY","window","innerWidth","innerHeight","Array","map","_","i","Math","random"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useContext } from 'react'\r\nimport Konva from 'konva';\r\nimport useImage from 'use-image';\r\nimport { Stage, Layer, Star, Text, Image } from 'react-konva';\r\nimport request from \"superagent\";\r\nimport { UserCount } from '../App';\r\nimport Reset from './Reset';\r\n\r\n\r\nconst URLImage = (props) => {\r\n  const [image] = useImage(props.url);\r\n  return <Image\r\n    image={image}\r\n    scaleX={props.scaleX}\r\n    scaleY={props.scaleY}\r\n  />;\r\n};\r\n\r\nconst Main = () => {\r\n  const [count, setCount] = useContext(UserCount);\r\n  const [url, setUrl] = useState(null);\r\n  const [image, setImage] = useState(null);\r\n\r\n  useEffect(() => {\r\n    getUrl();\r\n    setImage(useImage(url));\r\n  }, []);\r\n\r\n  const getUrl = () => {\r\n    request\r\n      .get(\"/api/getData\")\r\n      .end((err, data) => {\r\n        if (err) {\r\n          console.error(err);\r\n          return;\r\n        }\r\n          setUrl(data.body.url);\r\n          return;\r\n      });\r\n  };\r\n\r\n  const sendData = () => {\r\n    request\r\n    .get(\"/api/sendData\")\r\n    .query({data: -999})\r\n    .end((err, data) => {\r\n      if (err) {\r\n        console.error(err);\r\n        return;\r\n      }\r\n        console.log(data.body);\r\n    });\r\n  };\r\n\r\n  const handleDragStart = e => {\r\n    e.target.setAttrs({\r\n      shadowOffset: {\r\n        x: 15,\r\n        y: 15\r\n      },\r\n      scaleX: 1.1,\r\n      scaleY: 1.1\r\n    });\r\n  };\r\n\r\n  const handleDragEnd = e => {\r\n    e.target.to({\r\n      duration: 0.5,\r\n      easing: Konva.Easings.ElasticEaseOut,\r\n      scaleX: 1,\r\n      scaleY: 1,\r\n      shadowOffsetX: 5,\r\n      shadowOffsetY: 5\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div className=\"Main\">\r\n      <div className=\"\">\r\n      <button onClick={() => setCount(count + 1)}>\r\n          Click me\r\n      </button>\r\n      <button onClick={() => setCount(count - 1)}>\r\n          Click me\r\n      </button>\r\n      </div>\r\n      <div className=\"Stage1\">\r\n        <p> Stage1 </p>\r\n        <Stage width={window.innerWidth} height={window.innerHeight/3}>\r\n        <Layer>\r\n          <Image\r\n            image={image}\r\n            scaleX={5}\r\n            scaleY={5}\r\n          />\r\n          <Text text=\"Try to drag a star\" />\r\n          {[...Array(10)].map((_, i) => (\r\n            <Star\r\n              key={i}\r\n              x={Math.random() * window.innerWidth}\r\n              y={Math.random() * window.innerHeight/3}\r\n              numPoints={5}\r\n              innerRadius={20}\r\n              outerRadius={40}\r\n              fill=\"#89b717\"\r\n              opacity={0.8}\r\n              draggable\r\n              rotation={Math.random() * 180}\r\n              shadowColor=\"black\"\r\n              shadowBlur={10}\r\n              shadowOpacity={0.6}\r\n              onDragStart={e => handleDragStart(e)}\r\n              onDragEnd={e => handleDragEnd(e)}\r\n            />\r\n          ))}\r\n        </Layer>\r\n      </Stage>\r\n      </div>\r\n      <div className=\"Stage2\">\r\n        <p> Stage2 </p>\r\n        \r\n      </div>\r\n      \r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Main;\r\n"]},"metadata":{},"sourceType":"module"}